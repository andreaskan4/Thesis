@page "/"
@inject AuthStateService AuthStateService
@inject NavigationManager Navigation

@if (!isAuthChecked)
{
    <div class="loading-container">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>
}
else if (AuthStateService.IsLoggedIn)
{
    
}
else
{
    <div class="home-container">
        <div class="home-content fade-in">
            <!-- Logo -->
            <div class="logo">
                <img src="/images/logo.png" alt="Gnosis Logo" />
            </div>

            <h1>GNOSIS</h1>
            <p>Centralized thesis management platform</p>

            <div class="buttons">
                <a href="/login" class="btn btn-primary">Login</a>
                <a href="/register" class="btn btn-outline-primary">Register</a>
            </div>
        </div>
    </div>
}

@code {
    private bool isAuthChecked = false;

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(50);

        if (AuthStateService.IsLoggedIn)
        {
            switch (AuthStateService.CurrentUser?.Role)
            {
                case "Student":
                    Navigation.NavigateTo("/studenthome", true);
                    break;
                case "Teacher":
                    Navigation.NavigateTo("/profhome", true);
                    break;
                case "Admin":
                    Navigation.NavigateTo("/adminhome", true);
                    break;
            }
        }

        isAuthChecked = true;
        StateHasChanged();
    }
}

<style>
    /* Body reset */
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Loading Spinner */
    .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background: linear-gradient(to bottom, #cce7ff, #ffffff);
    }

    .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #1976d2;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
    }

    @@keyframes spin {
        0%

    {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }

    }

    /* Home Container */
    .home-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        width: 100vw;
        background-image: url('/images/backimage.jpg');
        background-size: cover;
        background-position: center;
        position: relative;
    }

        /* Overlay to make text pop */
        .home-container::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(255,255,255,0.25);
            z-index: 0;
            pointer-events: none;
        }

    /* Home Content */
    .home-content {
        text-align: center;
        z-index: 1;
        position: relative;
        padding: 3rem 2rem;
        border-radius: 16px;
        background: rgba(255,255,255,0.85);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        max-width: 500px;
        /* Animation */
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 1s forwards;
        animation-delay: 0.2s;
    }

    /* Logo */
    .logo img {
        width: 120px;
        height: auto;
        margin-bottom: 1.5rem;
    }

    /* Title and Text */
    .home-content h1 {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: #1e3a8a;
    }

    .home-content p {
        font-size: 1.25rem;
        margin-bottom: 2rem;
        line-height: 1.5;
        color: #1e3a8a;
    }

    /* Buttons */
    .buttons .btn {
        margin: 0 0.5rem;
        padding: 0.75rem 2rem;
        font-weight: 600;
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 1s forwards;
    }

        .buttons .btn:nth-child(1) {
            animation-delay: 0.6s;
        }

        .buttons .btn:nth-child(2) {
            animation-delay: 0.8s;
        }

    .btn-primary {
        background: linear-gradient(135deg, #64b5f6 0%, #1976d2 100%);
        color: white;
        border: none;
    }

        .btn-primary:hover {
            background: linear-gradient(135deg, #1976d2 0%, #0d47a1 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(21, 101, 192, 0.4);
        }

    .btn-outline-primary {
        background: transparent;
        border: 2px solid #1976d2;
        color: #1976d2;
    }

        .btn-outline-primary:hover {
            background: #1976d2;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(21, 101, 192, 0.4);
        }

    /* Fade-in Animation */
    @@keyframes fadeInUp {
        to

    {
        opacity: 1;
        transform: translateY(0);
    }

    }

    /* Responsive */
    @@media (max-width: 768px) {
        .home-content h1

    {
        font-size: 2.25rem;
    }

    .home-content p {
        font-size: 1rem;
    }

    .buttons .btn {
        padding: 0.5rem 1.5rem;
        margin: 0.25rem;
    }

    }
</style>
